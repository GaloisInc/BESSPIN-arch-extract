The Chisel build process is a little tricky.  The general idea is to compile the rocketchip or boom sources to a library `.jar`, compile a `Config` subclass representing the desired configuration (the standard P1/P2/P3 configs are baked into the library jar), and run the generator from the library jar on the selected config.  The output of this process is FIRRTL, which can be compiled to Verilog with a separate tool.

When checking rocket-chip/boom configs with featuresynth, the process looks like this:

 * featuresynth passes a feature model configuration to [`check-config.sh`](https://gitlab-ext.galois.com/ssith/arch-extract/blob/master/examples/rocket-p1/check-config.sh)
 * ... which calls [`check.py`](https://gitlab-ext.galois.com/ssith/arch-extract/blob/master/rocket-chip-check-config/check.py)
 * ... which compiles [`checkconfig.scala`](https://gitlab-ext.galois.com/ssith/arch-extract/blob/master/rocket-chip-check-config/checkconfig.scala.tmpl) using an autogenerated `build.sbt`, and runs it to perform the build.  This is a more complex version of the build process from [`rocket-chip-build`](https://gitlab-ext.galois.com/ssith/tool-suite/tree/develop/scripts/rocket-chip-build): some features can enabled dynamically (`r-c-b` sets them all statically), and it also performs sanity checks to detect features that have no effect on the build (these cause trouble for featuresynth).
 * `check.py` gathers information from [`besspin-rocket-chip-helper`](https://gitlab-ext.galois.com/ssith/tool-suite/blob/develop/nix/besspin/besspin-rocket-chip-helper), which reports information about a particular pre-compiled `rocket-chip` library.  There is also a `besspin-boom-helper`, since the boom library has a few differences.  Both scripts are packaged in [`besspin-pkgs.nix`](https://gitlab-ext.galois.com/ssith/tool-suite/blob/develop/nix/besspin-pkgs.nix#L218), and rely on the output of rocketchip and boom variants of `rocket-chip-configs`.
 * [`rocket-chip-configs`](https://gitlab-ext.galois.com/ssith/tool-suite/blob/develop/nix/besspin/rocket-chip-configs.nix) is a Nix package that compiles a rocket-chip or boom library jar using the [`rocket-chip-config-plugin`]https://gitlab-ext.galois.com/ssith/arch-extract/blob/master/rocket-chip-config-plugin/plugin.scala) plugin for the Scala compiler.  This plugin emits information about detected rocketchip config features and fields, which are needed for the "sanity check" mentioned above.  The build still produces an actual library jar, but it's immediately discarded.
 * The `edu.berkeley.cs %% rocketchip` library, which contains all the Chisel code for the CPU design, is compiled as a [Scala package](https://gitlab-ext.galois.com/ssith/tool-suite/blob/develop/nix/scala/rocket-chip.nix), installed to a local `sbt` repo, and linked into `checkconfig.scala`.

Featuresynth config checks stop here.  There's an additional step to produce Verilog:

 Invoke the FIRRTL compiler driver, as shown in the [`rocket-chip-build` `Makefile`](https://gitlab-ext.galois.com/ssith/tool-suite/blob/develop/scripts/rocket-chip-build/Makefile).
